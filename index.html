<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DomusTech - Domotica e Sicurezza Roma Sud</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --primary: #1a2a3a;
            --secondary: #25d366;
            --accent: #ff9800;
            --light: #f5f7fa;
        }

        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--light); color: #333; line-height: 1.6; }
        
        /* Header */
        header { background: #fff; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        header img { max-width: 150px; }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('hero-shelly.jpg');
            background-size: cover; background-position: center;
            color: white; padding: 80px 20px; text-align: center;
        }
        .hero h1 { font-size: 2.5rem; margin: 0; text-transform: uppercase; }
        .hero p { font-size: 1.2rem; margin: 15px 0 25px; opacity: 0.9; }
        .btn-main { background: var(--secondary); color: white; padding: 15px 30px; text-decoration: none; border-radius: 50px; font-weight: bold; display: inline-block; transition: 0.3s; }
        .btn-main:hover { transform: scale(1.05); background: #1ebe57; }

        .container { max-width: 1000px; margin: auto; padding: 20px; }

        /* Grid Servizi */
        .services { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 40px 0; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-content { padding: 20px; }
        .card h3 { margin: 0 0 10px; color: var(--primary); }

        /* Recensioni */
        .reviews-section { background: #fff; padding: 30px; border-radius: 15px; margin: 40px 0; }
        .review { background: #f9f9f9; padding: 15px; border-left: 5px solid var(--secondary); margin-bottom: 10px; border-radius: 5px; }
        .stars { color: #ffc107; font-size: 0.9rem; }

        /* Preventivatore */
        .calc-container { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        label { display: block; font-weight: 600; margin-top: 15px; color: var(--primary); }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; margin-top: 5px; }
        
        .result-box { background: var(--primary); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-top: 25px; }
        .result-box h2 { margin: 0; font-size: 2rem; color: var(--secondary); }

        .btn-pdf { background: #e74c3c; color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px; font-size: 1.1rem; }

        /* Floating buttons */
        .float { position: fixed; width: 60px; height: 60px; color: #FFF; border-radius: 50%; text-align: center; font-size: 30px; box-shadow: 2px 2px 10px rgba(0,0,0,0.3); z-index: 100; display: flex; align-items: center; justify-content: center; text-decoration: none; }
        .wa { bottom: 90px; right: 20px; background-color: #25d366; }
        .call { bottom: 20px; right: 20px; background-color: #007bff; }

        footer { text-align: center; padding: 40px 20px; background: #222; color: white; margin-top: 50px; }
        
        @media (max-width: 600px) { .form-grid { grid-template-columns: 1fr; } .hero h1 { font-size: 1.8rem; } }
    </style>
</head>
<body>

    <header>
        <img src="logo-domustech.png" alt="DomusTech">
    </header>

    <div class="hero">
        <h1>Casa Smart in poche ore</h1>
        <p>Installazione professionale senza opere murarie a Roma Sud</p>
        <a href="#preventivo" class="btn-main">üëâ Calcola il tuo Preventivo</a>
    </div>

    <div class="container">
        
        <div class="services">
            <div class="card">
                <img src="installazione-shelly.jpg" alt="Shelly">
                <div class="card-content">
                    <h3>‚ö° Installazione Shelly</h3>
                    <p>Automazione invisibile di luci e prese senza cambiare le placche originali.</p>
                </div>
            </div>
            <div class="card">
                <img src="cablaggio-elettrico.jpg" alt="Cablaggio">
                <div class="card-content">
                    <h3>üîß Cablaggio a Regola d'Arte</h3>
                    <p>Riparazioni elettriche e cablaggi ordinati per la massima sicurezza.</p>
                </div>
            </div>
            <div class="card">
                <img src="configurazione-app.jpg" alt="App">
                <div class="card-content">
                    <h3>üì± Configurazione Smart</h3>
                    <p>Controllo vocale con Alexa, Google Home e gestione remota via App.</p>
                </div>
            </div>
        </div>

        <div class="reviews-section">
            <h2 style="text-align:center">‚≠ê Cosa dicono i nostri clienti</h2>
            <div class="review">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <strong>Tecnico serio e veloce</strong> - Marco (EUR)
            </div>
            <div class="review">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <strong>Casa smart perfetta</strong> - Giulia (Ostia)
            </div>
            <div class="review">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <strong>Consigliatissimo</strong> - Luca (Acilia)
            </div>
        </div>

        <div class="calc-container" id="preventivo">
            <h2 style="text-align:center; color:var(--primary)">üí∞ Calcolatore Preventivo</h2>
            <div class="form-grid">
                <div>
                    <label>Nome</label>
                    <input type="text" id="nome" placeholder="Inserisci il tuo nome">
                </div>
                <div>
                    <label>Cognome</label>
                    <input type="text" id="cognome" placeholder="Inserisci il tuo cognome">
                </div>
            </div>

            <div class="form-grid">
                <div>
                    <label>Luci Smart (50‚Ç¨/cad)</label>
                    <select id="val_luci" onchange="calcola()">
                        <option value="0">0</option><option value="1">1</option><option value="2">2</option>
                        <option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option>
                    </select>
                </div>
                <div>
                    <label>Prese Smart (50‚Ç¨/cad)</label>
                    <select id="val_prese" onchange="calcola()">
                        <option value="0">0</option><option value="1">1</option><option value="2">2</option>
                        <option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option>
                    </select>
                </div>
                <div>
                    <label>Telecamere (100‚Ç¨/cad)</label>
                    <select id="val_cam" onchange="calcola()">
                        <option value="0">0</option><option value="1">1</option><option value="2">2</option>
                        <option value="3">3</option><option value="4">4</option>
                    </select>
                </div>
                <div>
                    <label>Termostato WiFi (120‚Ç¨)</label>
                    <select id="val_termo" onchange="calcola()">
                        <option value="0">No</option><option value="1">Si</option>
                    </select>
                </div>
            </div>

            <div class="result-box">
                <p>TOTALE STIMATO</p>
                <h2 id="totale">0 ‚Ç¨</h2>
            </div>

            <button type="button" class="btn-pdf" onclick="generaPDF()">üì• SCARICA PREVENTIVO PDF</button>
        </div>
    </div>

    <a href="https://wa.me/393505223388" class="float wa" target="_blank">üí¨</a>
    <a href="tel:+393505223388" class="float call">üìû</a>

    <footer>
        <p><strong>DomusTech Roma Sud</strong><br>
        Specialista in Shelly e Domotica residenziale.<br>
        <em>Interventi professionali per la tua casa intelligente.</em></p>
    </footer>

    <script>
        function calcola() {
            let luci = parseInt(document.getElementById("val_luci").value);
            let prese = parseInt(document.getElementById("val_prese").value);
            let cam = parseInt(document.getElementById("val_cam").value);
            let termo = parseInt(document.getElementById("val_termo").value);
            
            let tot = (luci * 50) + (prese * 50) + (cam * 100) + (termo * 120);
            document.getElementById("totale").innerText = tot + " ‚Ç¨";
            return tot;
        }

        function generaPDF() {
            let nome = document.getElementById("nome").value;
            let cognome = document.getElementById("cognome").value;
            
            if(!nome || !cognome) {
                alert("Per favore, inserisci Nome e Cognome per il PDF.");
                return;
            }

            let tot = calcola();
            let l = document.getElementById("val_luci").value;
            let p = document.getElementById("val_prese").value;
            let c = document.getElementById("val_cam").value;
            let t = document.getElementById("val_termo").value == "1" ? "Si" : "No";

            let content = `
                <div style="font-family:Arial; padding:40px; color:#333;">
                    <div style="text-align:center; border-bottom:2px solid #1a2a3a; padding-bottom:20px;">
                        <img src="logo-domustech.png" style="width:150px;"><br>
                        <h1 style="color:#1a2a3a; margin:10px 0;">Preventivo DomusTech</h1>
                    </div>
                    <div style="margin-top:30px;">
                        <p><strong>Spettabile Cliente:</strong> ${nome} ${cognome}</p>
                        <p><strong>Data:</strong> ${new Date().toLocaleDateString('it-IT')}</p>
                    </div>
                    <table style="width:100%; margin-top:30px; border-collapse:collapse;">
                        <tr style="background:#f4f4f4;">
                            <th style="padding:10px; border:1px solid #ddd; text-align:left;">Servizio/Dispositivo</th>
                            <th style="padding:10px; border:1px solid #ddd; text-align:center;">Quantit√†</th>
                        </tr>
                        <tr><td style="padding:10px; border:1px solid #ddd;">Punti Luce Smart</td><td style="padding:10px; border:1px solid #ddd; text-align:center;">${l}</td></tr>
                        <tr><td style="padding:10px; border:1px solid #ddd;">Prese Smart</td><td style="padding:10px; border:1px solid #ddd; text-align:center;">${p}</td></tr>
                        <tr><td style="padding:10px; border:1px solid #ddd;">Telecamere WiFi</td><td style="padding:10px; border:1px solid #ddd; text-align:center;">${c}</td></tr>
                        <tr><td style="padding:10px; border:1px solid #ddd;">Termostato Intelligente</td><td style="padding:10px; border:1px solid #ddd; text-align:center;">${t}</td></tr>
                    </table>
                    <div style="margin-top:30px; text-align:right;">
                        <h2 style="color:#25d366;">TOTALE STIMATO: ${tot} ‚Ç¨</h2>
                        <p style="font-size:12px; color:#777;">*Il presente documento √® un preventivo indicativo basato sui listini correnti.</p>
                    </div>
                </div>
            `;

            let opt = {
                margin: 0,
                filename: 'Preventivo_DomusTech.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };

            let element = document.createElement('div');
            element.innerHTML = content;
            html2pdf().from(element).set(opt).save();
        }
    </script>
</body>
</html>
