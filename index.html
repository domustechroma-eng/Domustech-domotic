<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DomusTech - Smart Home Roma Sud</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --primary: #0A2540; 
            --accent: #FF6B00;  
            --whatsapp: #25D366;
            --white: #ffffff;
        }

        * { box-sizing: border-box; scroll-behavior: smooth; }
        body { margin: 0; font-family: 'Inter', sans-serif; color: #425466; background: #f4f7f9; }

        /* HEADER */
        header { background: var(--white); padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top:0; z-index:1000; }
        header img { height: 45px; }

        /* HERO - OTTIMIZZATA PER VISIBILITÃ€ FOTO */
        .hero { 
            position: relative;
            min-height: 500px;
            background: url('hero-shelly.jpg') no-repeat center center;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        /* Overlay piÃ¹ leggero per far vedere meglio la foto */
        .hero::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 37, 64, 0.5); 
        }
        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 800px;
        }
        .hero h1 { font-size: 2.8rem; font-weight: 800; margin: 0 0 15px; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .hero h1 span { color: var(--accent); }
        
        .hero-cta { display: flex; flex-direction: column; gap: 15px; max-width: 320px; margin: 30px auto 0; }
        .btn-hero { padding: 18px; border-radius: 50px; text-decoration: none; font-weight: 800; text-align: center; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .btn-hero-wa { background: var(--whatsapp); color: white; }
        .btn-hero-calc { background: var(--accent); color: white; }

        .container { max-width: 1100px; margin: auto; padding: 40px 20px; }

        /* SERVIZI */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin: 40px 0; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .card img { width: 100%; height: 180px; object-fit: cover; }
        .card-body { padding: 20px; }

        /* RECENSIONI - AGGIUNTE E OTTIMIZZATE */
        .reviews { background: var(--primary); color: white; padding: 60px 20px; border-radius: 20px; margin: 40px 0; }
        .rev-item { border-left: 3px solid var(--accent); padding-left: 20px; margin-bottom: 30px; }
        .stars { color: var(--accent); margin-bottom: 5px; display: block; }

        /* PREVENTIVATORE - IL FORM CHE TI PIACE */
        .calc-section { background: white; padding: 40px 25px; border-radius: 20px; border: 2px solid var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        label { display: block; font-weight: 700; font-size: 0.85rem; margin-bottom: 5px; }
        input, select { width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; }
        
        .total-box { background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center; margin: 25px 0; border: 2px dashed var(--primary); }
        .total-box h2 { font-size: 2.8rem; margin: 0; color: var(--primary); }
        
        .btn-pdf { width: 100%; padding: 20px; background: #222; color: white; border: none; border-radius: 10px; font-weight: 800; font-size: 1.1rem; cursor: pointer; }

        /* STICKY MOBILE BAR */
        .sticky-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; display: flex; padding: 10px; gap: 10px; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 2000; }
        .s-btn { flex: 1; padding: 15px; text-align: center; border-radius: 10px; color: white; text-decoration: none; font-weight: 800; font-size: 0.9rem; }

        footer { text-align: center; padding: 40px 20px 120px; font-size: 0.8rem; color: #888; }

        @media (max-width: 600px) {
            .form-row { grid-template-columns: 1fr; }
            .hero h1 { font-size: 1.8rem; }
        }
        @media (min-width: 601px) { .sticky-bar { display: none; } }
    </style>
</head>
<body>

<header>
    <img src="logo-domustech.png" alt="Logo DomusTech">
    <a href="tel:+393505223388" style="text-decoration:none; color:var(--primary); font-weight:800;">ðŸ“ž 350 522 3388</a>
</header>

<section class="hero">
    <div class="hero-content">
        <h1>La Tua Casa <span>Smart</span><br>Senza Lavori Murari</h1>
        <p>Specialista Shelly a Roma Sud. Installazione rapida e pulita.</p>
        <div class="hero-cta">
            <a href="https://wa.me/393505223388" class="btn-hero btn-hero-wa">WHATSAPP DIRETTO</a>
            <a href="#preventivo" class="btn-hero btn-hero-calc">CALCOLA PREVENTIVO</a>
        </div>
    </div>
</section>

<div class="container">
    
    <div class="grid">
        <div class="card">
            <img src="installazione-shelly.jpg" alt="Shelly">
            <div class="card-body"><h3>Domotica Invisibile</h3><p>Rendiamo smart i tuoi attuali interruttori.</p></div>
        </div>
        <div class="card">
            <img src="cablaggio-elettrico.jpg" alt="Cablaggio">
            <div class="card-body"><h3>Sicurezza Elettrica</h3><p>Riparazioni e cablaggi certificati.</p></div>
        </div>
        <div class="card">
            <img src="configurazione-app.jpg" alt="App">
            <div class="card-body"><h3>Termostati WiFi</h3><p>Gestisci il clima dal tuo smartphone.</p></div>
        </div>
    </div>

    <div class="reviews">
        <h2 style="text-align:center; margin-bottom:40px;">Recensioni Verificate</h2>
        <div class="rev-item">
            <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
            <p>"Tecnico eccellente all'EUR. Casa smart in un pomeriggio."</p>
            <strong>Marco (EUR)</strong>
        </div>
        <div class="rev-item">
            <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
            <p>"Finalmente accendo i termosifoni prima di tornare ad Ostia. Bravissimo."</p>
            <strong>Giulia (Ostia)</strong>
        </div>
        <div class="rev-item">
            <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
            <p>"Senza fare un buco ha sistemato tutto ad Acilia. Molto serio."</p>
            <strong>Luca (Acilia)</strong>
        </div>
    </div>

    <div class="calc-section" id="preventivo">
        <h2>Genera il tuo Preventivo PDF</h2>
        <div class="form-row">
            <div><label>Nome e Cognome</label><input type="text" id="c_nome" placeholder="Mario Rossi"></div>
            <div><label>Zona di Roma</label><input type="text" id="c_zona" placeholder="es. Ostia"></div>
        </div>
        <div class="form-row">
            <div><label>Luci Smart (50â‚¬ cad)</label><select id="n_luci" onchange="up()"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
            <div><label>Prese Smart (50â‚¬ cad)</label><select id="n_prese" onchange="up()"><option value="0">0</option><option value="1">1</option><option value="2">2</option></select></div>
        </div>
        <div class="form-row">
            <div><label>Telecamere (100â‚¬ cad)</label><select id="n_cam" onchange="up()"><option value="0">0</option><option value="1">1</option><option value="2">2</option></select></div>
            <div><label>Termostato (120â‚¬)</label><select id="n_termo" onchange="up()"><option value="0">No</option><option value="1">SÃ¬</option></select></div>
        </div>

        <div class="total-box">
            <span>INVESTIMENTO STIMATO</span>
            <h2 id="display_tot">0 â‚¬</h2>
        </div>

        <button class="btn-pdf" onclick="makePDF()">SCARICA IL TUO PREVENTIVO (PDF)</button>
    </div>

</div>

<div class="sticky-bar">
    <a href="tel:+393505223388" class="s-btn" style="background:var(--accent)">CHIAMA ORA</a>
    <a href="https://wa.me/393505223388" class="s-btn" style="background:var(--whatsapp)">WHATSAPP</a>
</div>

<footer>
    <strong>DomusTech Roma Sud</strong><br>
    Prestazione Professionale Occasionale.<br>
    Zona EUR - Ostia - Acilia - Infernetto
</footer>

<script>
    function up() {
        const l = (parseInt(document.getElementById('n_luci').value) || 0) * 50;
        const p = (parseInt(document.getElementById('n_prese').value) || 0) * 50;
        const c = (parseInt(document.getElementById('n_cam').value) || 0) * 100;
        const t = (parseInt(document.getElementById('n_termo').value) || 0) * 120;
        const total = l + p + c + t;
        document.getElementById('display_tot').innerText = total + " â‚¬";
        return total;
    }

    async function makePDF() {
        const nome = document.getElementById('c_nome').value;
        if(!nome) { alert("Inserisci il tuo nome!"); return; }

        const total = up();
        const date = new Date().toLocaleDateString('it-IT');
        
        // Creiamo il template HTML per il PDF
        const template = `
            <div style="font-family: Arial; padding: 40px; color: #0A2540;">
                <table style="width: 100%; border-bottom: 3px solid #FF6B00; padding-bottom: 20px;">
                    <tr>
                        <td><img src="logo-domustech.png" style="height: 60px;"></td>
                        <td style="text-align: right;"><h2>PREVENTIVO SMART HOME</h2><p>Data: ${date}</p></td>
                    </tr>
                </table>
                <p style="margin-top:30px;"><strong>Cliente:</strong> ${nome}</p>
                <p><strong>Zona:</strong> ${document.getElementById('c_zona').value || 'Roma'}</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                    <tr style="background: #0A2540; color: white; text-align: left;">
                        <th style="padding: 10px;">Descrizione</th>
                        <th style="padding: 10px; text-align: center;">QtÃ </th>
                    </tr>
                    <tr><td style="padding: 10px; border-bottom: 1px solid #eee;">Punti Luce Smart</td><td style="padding: 10px; border-bottom: 1px solid #eee; text-align: center;">${document.getElementById('n_luci').value}</td></tr>
                    <tr><td style="padding: 10px; border-bottom: 1px solid #eee;">Prese Smart</td><td style="padding: 10px; border-bottom: 1px solid #eee; text-align: center;">${document.getElementById('n_prese').value}</td></tr>
                    <tr><td style="padding: 10px; border-bottom: 1px solid #eee;">Telecamere WiFi</td><td style="padding: 10px; border-bottom: 1px solid #eee; text-align: center;">${document.getElementById('n_cam').value}</td></tr>
                    <tr><td style="padding: 10px; border-bottom: 1px solid #eee;">Termostato WiFi</td><td style="padding: 10px; border-bottom: 1px solid #eee; text-align: center;">${document.getElementById('n_termo').value == '1' ? '1' : '0'}</td></tr>
                </table>
                <div style="margin-top: 40px; text-align: right;">
                    <h2 style="color: #FF6B00;">TOTALE STIMATO: ${total} â‚¬</h2>
                    <p style="font-size: 10px; color: #888;">*Prestazione occasionale esente IVA. Il prezzo puÃ² variare dopo sopralluogo.</p>
                </div>
            </div>
        `;

        const opt = {
            margin: 0,
            filename: `Preventivo_DomusTech_${nome}.pdf`,
            html2canvas: { scale: 2, useCORS: true },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
        };

        // Esecuzione generazione PDF
        html2pdf().from(template).set(opt).save();
    }
</script>

</body>
</html>
